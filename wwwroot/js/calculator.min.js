const screen=document.getElementById("screen"),historyEl=document.getElementById("history");let current="0",previous=null,operator=null,justEvaluated=!1;function prettyOp(t){return"*"===t?"×":"/"===t?"÷":t}function update(){screen.value=current,historyEl.textContent=null!==previous&&operator?`${previous} ${prettyOp(operator)}`:""}function inputDigit(t){if(justEvaluated)return current=t,justEvaluated=!1,void update();"0"===current?current=t:current+=t,update()}function inputDot(){if(justEvaluated)return current="0.",justEvaluated=!1,void update();current.includes(".")||(current+="."),update()}function clearAll(){current="0",previous=null,operator=null,justEvaluated=!1,update()}function backspace(){if(justEvaluated)return current="0",justEvaluated=!1,void update();current=current.length<=1?"0":current.slice(0,-1),update()}function setOperator(t){operator&&null!==previous&&!justEvaluated&&evaluate(),previous=Number(current),operator=t,justEvaluated=!1,current="0",update()}function evaluate(){if(null===operator||null===previous)return;const t=previous,e=Number(current);let u;switch(operator){case"+":u=t+e;break;case"-":u=t-e;break;case"*":u=t*e;break;case"/":if(0===e)return current="Błąd",previous=null,operator=null,justEvaluated=!0,void update();u=t/e;break;default:return}current=Number.isInteger(u)?String(u):String(Number(u.toFixed(12))),previous=null,operator=null,justEvaluated=!0,update()}document.addEventListener("click",t=>{const e=t.target.closest("button");if(!e)return;const u=e.getAttribute("data-digit"),r=e.getAttribute("data-op"),n=e.getAttribute("data-action");return null!==u?inputDigit(u):null!==r?setOperator(r):"clear"===n?clearAll():"backspace"===n?backspace():"dot"===n?inputDot():"equals"===n?evaluate():void 0}),update();